//*****************************************************************************************//
//**                                                                                     **//
//**                   　　　Filterクラス内メソッド定義(フィルター)                      **//
//**                                                                                     **//
//*****************************************************************************************//

#include "ImageRead.h"
#include "ImageDraw.h"
#include "Move.h"
#include "Filter.h"

Filter::Filter(){//コンストラクタ

	block = (int**)malloc(sizeof(int*) * 400);//ブロック画像メモリ確保
	for (int i = 0; i < 400; i++)block[i] = (int*)malloc(sizeof(int) * 400);

}

void Filter::filter(Move *move, ImageDraw *draw){

	int i, j, x, y;//for
	int bsize = move->paras[move->size].bsize;

	//ブロック画像フィルター
	char b_filter[100][101] =  //[y][x]
	{   "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
		"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
		"1122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222211",
		"1122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222211",
		"1122333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333332211",
		"1122333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333332211",
		"1122334444444444444444444444444444444444444444444444444444444444444444444444444444444444444444332211",
		"1122334444444444444444444444444444444444444444444444444444444444444444444444444444444444444444332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334400000000000000000000000000000000000000000000000000000000000000000000000000000000000044332211",
		"1122334444444444444444444444444444444444444444444444444444444444444444444444444444444444444444332211",
		"1122334444444444444444444444444444444444444444444444444444444444444444444444444444444444444444332211",
		"1122333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333332211",
		"1122333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333332211",
		"1122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222211",
		"1122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222211",
		"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
		"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
	};
	
	//フィルターリサイズ,配列書き込み処理
	for (y = 0; y < 400; y += bsize){
		for (x = 0; x < 400; x += bsize){
			for (j = 0; j < bsize; j++){
				for (i = 0; i < bsize; i++){

					if (b_filter[j * 100 / bsize][i * 100 / bsize] == '1'){
						block[y + j][x + i] = 150; continue;
					}

					if (b_filter[j * 100 / bsize][i * 100 / bsize] == '2'){
						block[y + j][x + i] = 90; continue;
					}

					if (b_filter[j * 100 / bsize][i * 100 / bsize] == '3'){
						block[y + j][x + i] = 50; continue;
					}

					if (b_filter[j * 100 / bsize][i * 100 / bsize] == '4'){
						block[y + j][x + i] = 20; continue;
					}

					//該当無し
					block[y + j][x + i] = 0;

				}
			}
		}
	}

}

Filter::~Filter(){//デストラクタ

	for (int i = 0; i < 400; i++)free(block[i]);
	free(block);

}